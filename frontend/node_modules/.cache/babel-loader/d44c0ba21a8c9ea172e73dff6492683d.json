{"ast":null,"code":"import _objectSpread from\"/home/gael/development/web/python/flask/prueba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/gael/development/web/python/flask/prueba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gael/development/web/python/flask/prueba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/gael/development/web/python/flask/prueba/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useHistory}from'react-router';import Loading from'../components/Loading';import{IP_API}from'../constants/ip_services';var CrearUsuario=function CrearUsuario(){var history=useHistory();var _useState=useState({nombre:'',ap:''}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),cargando=_useState4[0],setCargando=_useState4[1];var saveUsuarios=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var formData,fileField,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setCargando(true);formData=new FormData();fileField=document.querySelector(\"input[type='file']\");console.log(fileField.files[0]);formData.append('avatar',fileField.files[0]);formData.append('nombre',values.nombre);formData.append('apeido',values.ap);e.preventDefault();_context.next=10;return fetch(\"\".concat(IP_API,\"api/addUsuarios/\"),{method:'POST',body:formData});case 10:res=_context.sent;_context.next=13;return res.json();case 13:data=_context.sent;console.log(data);alert(data.message);setTimeout(function(){setCargando(false);history.push('/usuarios');},1000);case 17:case\"end\":return _context.stop();}}},_callee);}));return function saveUsuarios(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",null,\"Nuevo Usuario\"),cargando?/*#__PURE__*/React.createElement(Loading,null):/*#__PURE__*/React.createElement(\"form\",{onSubmit:saveUsuarios},/*#__PURE__*/React.createElement(\"label\",null,\"Nombre\"),/*#__PURE__*/React.createElement(\"input\",{value:values.nombre,onChange:function onChange(e){return setValues(_objectSpread(_objectSpread({},values),{},{nombre:e.target.value}));}}),/*#__PURE__*/React.createElement(\"label\",null,\"Apeido\"),/*#__PURE__*/React.createElement(\"input\",{value:values.ap,onChange:function onChange(e){return setValues(_objectSpread(_objectSpread({},values),{},{ap:e.target.value}));}}),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",accept:\"image/png, image/jpeg\",max:\"1000\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\" Enviar\")));};export default CrearUsuario;","map":{"version":3,"sources":["/home/gael/development/web/python/flask/prueba/frontend/src/pages/CrearUsuario.jsx"],"names":["React","useState","useHistory","Loading","IP_API","CrearUsuario","history","nombre","ap","values","setValues","cargando","setCargando","saveUsuarios","e","formData","FormData","fileField","document","querySelector","console","log","files","append","preventDefault","fetch","method","body","res","json","data","alert","message","setTimeout","push","target","value"],"mappings":"orBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,OAASC,MAAT,KAAuB,0BAAvB,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvB,GAAMC,CAAAA,OAAO,CAAGJ,UAAU,EAA1B,CADuB,cAEKD,QAAQ,CAAC,CACjCM,MAAM,CAAC,EAD0B,CAEjCC,EAAE,CAAC,EAF8B,CAAD,CAFb,wCAEhBC,MAFgB,eAERC,SAFQ,8BAMQT,QAAQ,CAAC,KAAD,CANhB,yCAMhBU,QANgB,eAMPC,WANO,eAQvB,GAAMC,CAAAA,YAAY,0FAAG,iBAAMC,CAAN,kJACjBF,WAAW,CAAC,IAAD,CAAX,CACMG,QAFW,CAEA,GAAIC,CAAAA,QAAJ,EAFA,CAGXC,SAHW,CAGCC,QAAQ,CAACC,aAAT,CAAuB,oBAAvB,CAHD,CAKjBC,OAAO,CAACC,GAAR,CAAYJ,SAAS,CAACK,KAAV,CAAgB,CAAhB,CAAZ,EACAP,QAAQ,CAACQ,MAAT,CAAgB,QAAhB,CAAyBN,SAAS,CAACK,KAAV,CAAgB,CAAhB,CAAzB,EACAP,QAAQ,CAACQ,MAAT,CAAgB,QAAhB,CAAyBd,MAAM,CAACF,MAAhC,EACAQ,QAAQ,CAACQ,MAAT,CAAgB,QAAhB,CAAyBd,MAAM,CAACD,EAAhC,EAEAM,CAAC,CAACU,cAAF,GAViB,uBAWCC,CAAAA,KAAK,WAAIrB,MAAJ,qBAA6B,CAChDsB,MAAM,CAAC,MADyC,CAEhDC,IAAI,CAACZ,QAF2C,CAA7B,CAXN,SAWXa,GAXW,sCAeEA,CAAAA,GAAG,CAACC,IAAJ,EAfF,SAeXC,IAfW,eAgBjBV,OAAO,CAACC,GAAR,CAAYS,IAAZ,EACAC,KAAK,CAACD,IAAI,CAACE,OAAN,CAAL,CACAC,UAAU,CAAC,UAAI,CACXrB,WAAW,CAAC,KAAD,CAAX,CACAN,OAAO,CAAC4B,IAAR,CAAa,WAAb,EACH,CAHS,CAGR,IAHQ,CAAV,CAlBiB,uDAAH,kBAAZrB,CAAAA,YAAY,4CAAlB,CAwBA,mBAAO,4CACH,8CADG,CAEHF,QAAQ,cAAG,oBAAC,OAAD,MAAH,cAAgB,4BAAM,QAAQ,CAAEE,YAAhB,eACpB,0CADoB,cAEpB,6BAAO,KAAK,CAAEJ,MAAM,CAACF,MAArB,CAA6B,QAAQ,CAAE,kBAAAO,CAAC,QAAEJ,CAAAA,SAAS,gCAAKD,MAAL,MAAYF,MAAM,CAACO,CAAC,CAACqB,MAAF,CAASC,KAA5B,GAAX,EAAxC,EAFoB,cAGpB,0CAHoB,cAIpB,6BAAO,KAAK,CAAE3B,MAAM,CAACD,EAArB,CAAyB,QAAQ,CAAE,kBAAAM,CAAC,QAAEJ,CAAAA,SAAS,gCAAKD,MAAL,MAAYD,EAAE,CAACM,CAAC,CAACqB,MAAF,CAASC,KAAxB,GAAX,EAApC,EAJoB,cAKpB,6BAAO,IAAI,CAAC,MAAZ,CAAmB,MAAM,CAAC,uBAA1B,CAAkD,GAAG,CAAC,MAAtD,EALoB,cAMpB,8BAAQ,IAAI,CAAC,QAAb,YANoB,CAFrB,CAAP,CAWH,CA3CD,CA6CA,cAAe/B,CAAAA,YAAf","sourcesContent":["import React, { useState } from 'react'\nimport { useHistory } from 'react-router';\nimport Loading from '../components/Loading';\nimport { IP_API } from '../constants/ip_services';\n\nconst CrearUsuario = () => {\n    const history = useHistory();\n    const [values ,setValues] = useState({\n        nombre:'',\n        ap:'',\n    });\n    const [cargando,setCargando] = useState(false);\n\n    const saveUsuarios = async e =>{\n        setCargando(true);\n        const formData = new FormData();\n        const fileField = document.querySelector(\"input[type='file']\");\n\n        console.log(fileField.files[0]);\n        formData.append('avatar',fileField.files[0]);\n        formData.append('nombre',values.nombre);\n        formData.append('apeido',values.ap);\n\n        e.preventDefault();\n        const res = await fetch(`${IP_API}api/addUsuarios/`,{\n            method:'POST',\n            body:formData\n        });\n        const data = await res.json();\n        console.log(data);\n        alert(data.message);\n        setTimeout(()=>{\n            setCargando(false);\n            history.push('/usuarios');\n        },1000)\n    }\n\n    return(<div>\n        <h4>Nuevo Usuario</h4>\n       {cargando ? <Loading/> : <form onSubmit={saveUsuarios}>\n            <label>Nombre</label>\n            <input value={values.nombre} onChange={e=>setValues({...values,nombre:e.target.value})} />\n            <label>Apeido</label>\n            <input value={values.ap} onChange={e=>setValues({...values,ap:e.target.value})}/>\n            <input type='file' accept=\"image/png, image/jpeg\" max='1000' />\n            <button type='submit' > Enviar</button>\n        </form>}\n    </div>);\n}\n\nexport default CrearUsuario;"]},"metadata":{},"sourceType":"module"}